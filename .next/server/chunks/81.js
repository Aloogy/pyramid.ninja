exports.id=81,exports.ids=[81],exports.modules={224:(e,t,r)=>{"use strict";r.d(t,{B5:()=>u,Er:()=>p,Mf:()=>l,NR:()=>c,RN:()=>s,XF:()=>d,jH:()=>i});var a=r(3646),n=r.n(a);let o=()=>{let e=[];for(let t=0;t<52;t++)e.push(t);return e},i=()=>{let e="abcdefghijklmnopqrstuvwxyz",t="";for(let r=0;r<4;r++){let r=Math.floor(Math.random()*e.length);t+=e.charAt(r)}return t.toUpperCase()},s=e=>{let t=n()(e),r=o();for(let e=r.length-1;e>0;e--){let a=Math.floor(t()*(e+1));[r[e],r[a]]=[r[a],r[e]]}return r},d=e=>({suit:Math.floor(e/13),rank:e%13,i:e}),c=e=>["an Ace","a Two","a Three","a Four","a Five","a Six","a Seven","an Eight","a Nine","a Ten","a Jack","a Queen","a King"][d(e).rank],l=e=>{let t=[{x:179,y:442},{x:81,y:442},{x:-17,y:442},{x:-115,y:442},{x:-217,y:442},{x:123,y:310},{x:29,y:310},{x:-69,y:310},{x:-166,y:310},{x:73,y:190},{x:-23,y:190},{x:-116,y:190},{x:37,y:65},{x:-57,y:65},{x:-10,y:-59}];return e>=0&&e<t.length?t[e]:{x:-1e3,y:-1e3}},u=e=>{let t=[{x:49,y:0},{x:-89,y:0},{x:49,y:175},{x:-89,y:175}];return e>=0&&e<t.length?t[e]:{x:0,y:0}},p=(e,t)=>{let r=n()(`${t}-${e}`),a=[["Time to get wrecked!","Time to turn our livers to coral!","Drink Responsibly, yeah"],["I hear round 2 is spicy!","Enjoy the hangover!","Drinking may cause memory loss and... may also cause memory loss."],["Your liver will thank you!","Q: Whats the difference between a dog and a fox? A: 2 drinks."],["Sponsored by crippling depression.","Be kind to your friends!"],["You alcoholic!","So a dyslexic walks into a bra...","I wonder if this is how Scientology started?"],["Who lives in a pineapple under the sea?","Try to gang up on eachother."],["Round 6 is going to get heated!","Beauty is in the eye of the beer holder."],["Yay lockdown!","Two men walked into a bar. The third one ducked."],["The youngest person should double their drinks...","Ever thought about a career in politics?"],["Ready to die?","The past, present, and future walk into a bar. It was tense."],["Green is not a creative colour.","Not drunk enough? Time to call bullshit on everything!"],["Vote liver failure!","Ran out? Just drink hand sanitiser..."],["The drinks get serious now.","Alcohol is a perfect solvent: It dissolves marriages, families and careers."],["Someone is going to be sick...","Nanananana Batman."],["Nearly there!","Vodka isn't always the answer. But it's worth a shot."],["Last one!","You've climbed the alcoholic mountain!","You all look so pretty now!"]],o=a[Math.min(e,a.length-1)],i=Math.floor(r()*o.length);return o[i]}},979:()=>{},2081:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>u});var n=r(8732),o=r(2015),i=r(7912),s=r.n(i),d=r(4670),c=r(2506);r(979);var l=e([d,c]);[d,c]=l.then?(await l)():l;let u=function({Component:e,pageProps:t}){let[r,a]=(0,o.useState)(1);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s(),{children:[(0,n.jsx)("title",{children:"Pyramid.Ninja - Online version of the drinking card game"}),(0,n.jsx)("meta",{name:"description",content:"The digital, online version of the drinking game 'pyramid'. Requires 2+ players each with an internet connected device."}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, maximum-scale=6.0, user-scalable=0"}),(0,n.jsx)("meta",{name:"theme-color",content:"#e91e63"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{property:"og:url",content:"https://pyramid.ninja/"}),(0,n.jsx)("meta",{property:"og:title",content:"Pyramid.Ninja - Online version of the drinking card game."}),(0,n.jsx)("meta",{property:"og:description",content:"The digital, online version of the drinking game 'pyramid'. Requires 2+ players each with an internet connected device."}),(0,n.jsx)("meta",{property:"og:image",content:"https://pyramid.ninja/assets/img/pyramid.ninja.background.png"}),(0,n.jsx)("meta",{property:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{property:"twitter:url",content:"https://pyramid.ninja/"}),(0,n.jsx)("meta",{property:"twitter:title",content:"Pyramid.Ninja - Online version of the drinking card game."}),(0,n.jsx)("meta",{property:"twitter:description",content:"The digital, online version of the drinking game 'pyramid'. Requires 2+ players each with an internet connected device."}),(0,n.jsx)("meta",{property:"twitter:image",content:"https://pyramid.ninja/assets/img/pyramid.ninja.background.png"}),(0,n.jsx)("link",{rel:"icon",type:"image/png",href:"/assets/img/icon.png"})]}),(0,n.jsx)(d.OJ,{children:(0,n.jsx)(c.Sj,{children:(0,n.jsx)("div",{className:"min-h-screen bg-cover bg-center flex flex-col",style:{backgroundImage:`url('/assets/img/backgrounds/${r}.jpg')`},children:(0,n.jsx)(e,{...t})})})})]})};a()}catch(e){a(e)}})},2506:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Im:()=>m,Sj:()=>p});var n=r(8732),o=r(2015),i=r(4337),s=r(6953),d=r(4670),c=r(224),l=e([i,s,d]);[i,s,d]=l.then?(await l)():l;let u=(0,o.createContext)(void 0),p=({children:e})=>{let{userUid:t}=(0,d.As)(),[r,a]=(0,o.useState)(null),[l,p]=(0,o.useState)(null),[m,y]=(0,o.useState)([]),[h,g]=(0,o.useState)(!1),[_,w]=(0,o.useState)(null),f=async()=>{try{g(!0),w(null);let e=(0,c.jH)(),t=(0,c.RN)(e),r=t.splice(0,15).map(e=>({id:e,shown:!1}));return await (0,i.setDoc)((0,i.doc)(s.db,"games",e),{"__pyramid.meta":{started:!1,total_drinks:0,created_at:new Date,fancy_shown:!1},"__pyramid.cards":r,"__pyramid.deck":t}),a(e),S(e),g(!1),e}catch(e){throw console.error("Error creating game:",e),w("Failed to create game. Please try again."),g(!1),e}},x=async(e,r)=>{try{g(!0),w(null);let n=(0,i.doc)(s.db,"games",e.toUpperCase());if(!(await (0,i.getDoc)(n)).exists())throw Error("Game not found");if(!t)throw Error("Not authenticated");await (0,i.updateDoc)(n,{[t]:{admin:!0,uid:t,name:r.toUpperCase(),drinks:0,initial_deal:!1}}),a(e.toUpperCase()),S(e.toUpperCase()),localStorage.setItem("playerName",r.toUpperCase()),g(!1)}catch(t){let e=t instanceof Error?t.message:"Failed to join game";throw console.error("Error joining game:",t),w(e),g(!1),t}},j=async e=>{try{let t=(0,i.doc)(s.db,"games",e.toUpperCase());await (0,i.updateDoc)(t,{"__pyramid.meta.started":!0})}catch(e){throw console.error("Error starting game:",e),e}},b=async(e,t)=>{try{let r=(0,i.doc)(s.db,"games",e.toUpperCase()),a=(await (0,i.getDoc)(r)).data();if(!a)return;let n=Object.keys(a["__pyramid.rounds"]||{}).length+1,o=Math.ceil((15-t)/5),d=a["__pyramid.cards"][t].id,c=[...a["__pyramid.cards"]];c[t].shown=!0,await (0,i.updateDoc)(r,{"__pyramid.cards":c,"__pyramid.currentRound":{round_number:n,round_row:o,round_card:d},[`__pyramid.rounds.${n}`]:{round_row:o,round_card:d,round_transactions:[]}})}catch(e){throw console.error("Error selecting card:",e),e}},v=async(e,t,r,a)=>{try{let n=(0,i.doc)(s.db,"games",e.toUpperCase()),o=(await (0,i.getDoc)(n)).data();if(!o||!o["__pyramid.rounds"]||!o["__pyramid.rounds"][a])throw Error("Round not found");let d=[...o["__pyramid.rounds"][a].round_transactions||[],{t_from:t,t_to:r,status:"waiting"}];await (0,i.updateDoc)(n,{[`__pyramid.rounds.${a}.round_transactions`]:d})}catch(e){throw console.error("Error calling player:",e),e}},k=async(e,t,r,a,n)=>{try{let o=(0,i.doc)(s.db,"games",e.toUpperCase()),d=(await (0,i.getDoc)(o)).data();if(!d||!d["__pyramid.rounds"]||!d["__pyramid.rounds"][a])throw Error("Round not found");let c=d["__pyramid.rounds"][a].round_transactions,l=c.findIndex(e=>e.t_from===t&&e.t_to===r&&"waiting"===e.status);if(-1===l)throw Error("Transaction not found");let u=[...c];u[l].status=n?"accepted":"bullshit",await (0,i.updateDoc)(o,{[`__pyramid.rounds.${a}.round_transactions`]:u})}catch(e){throw console.error("Error responding to call:",e),e}},E=async(e,t,r,a,n)=>{try{let o=(0,i.doc)(s.db,"games",e.toUpperCase()),d=(await (0,i.getDoc)(o)).data();if(!d)return;let c=d[t];if(!c||!c.cards)return;let l=d["__pyramid.rounds"][a].round_transactions,u=l.findIndex(e=>e.t_from===t&&"bullshit"===e.status);if(-1===u)return;let p=[...l];p[u].status=n?"bullshit_correct":"bullshit_wrong";let m=[...d["__pyramid.deck"]],y=m.shift(),h=c.cards.filter((e,t)=>t!==r);void 0!==y&&h.push({i:y,seen:!1}),await (0,i.updateDoc)(o,{[`__pyramid.rounds.${a}.round_transactions`]:p,[`${t}.cards`]:h,"__pyramid.deck":m})}catch(e){throw console.error("Error showing bullshit card:",e),e}},S=e=>{let t=(0,i.doc)(s.db,"games",e);return(0,i.onSnapshot)(t,e=>{let t=e.data();if(t){p(t);let e=Object.entries(t).filter(([e])=>"__pyramid.meta"!==e&&"__pyramid.cards"!==e&&"__pyramid.deck"!==e&&"__pyramid.currentRound"!==e&&"__pyramid.rounds"!==e&&"__pyramid.summary"!==e).map(([e,t])=>({uid:e,...t}));y(e)}},e=>{console.error("Error getting game updates:",e),w("Failed to get game updates. Please try refreshing the page.")})};return(0,n.jsx)(u.Provider,{value:{gameId:r,gameData:l,players:m,loading:h,error:_,joinGame:x,createGame:f,startGame:j,selectCard:b,callPlayer:v,respondToCall:k,showBullshitCard:E},children:e})},m=()=>{let e=(0,o.useContext)(u);if(void 0===e)throw Error("useGame must be used within a GameProvider");return e};a()}catch(e){a(e)}})},4670:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{As:()=>u,OJ:()=>l});var n=r(8732),o=r(2015),i=r(6958),s=r(6953),d=e([i,s]);[i,s]=d.then?(await d)():d;let c=(0,o.createContext)(void 0),l=({children:e})=>{let[t,r]=(0,o.useState)(null),[a,d]=(0,o.useState)(null),[l,u]=(0,o.useState)(!0);(0,o.useEffect)(()=>{let e=(0,i.onAuthStateChanged)(s.j2,e=>{r(e),d(e?e.uid:null),u(!1)});return()=>e()},[]);let p=async()=>{try{await (0,i.signInAnonymously)(s.j2)}catch(e){console.error("Error signing in anonymously:",e)}},m=async()=>{try{await (0,i.signOut)(s.j2)}catch(e){console.error("Error signing out:",e)}};return(0,o.useEffect)(()=>{l||t||p()},[l,t]),(0,n.jsx)(c.Provider,{value:{user:t,userUid:a,loading:l,signInAnonymously:p,signOut:m},children:!l&&e})},u=()=>{let e=(0,o.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e};a()}catch(e){a(e)}})},6953:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{db:()=>p,j2:()=>u});var n=r(6551),o=r(6958),i=r(4337),s=r(8444),d=r(9970),c=e([n,o,i,s,d]);[n,o,i,s,d]=c.then?(await c)():c;let l=(0,n.getApps)().length?(0,n.getApps)()[0]:(0,n.initializeApp)({apiKey:"AIzaSyDyk-FE8w0yd82WduMP6KVmvRPt0-4miS8",authDomain:"pyramid-ninja.firebaseapp.com",databaseURL:"https://pyramid-ninja.firebaseio.com",projectId:"pyramid-ninja",storageBucket:"pyramid-ninja.appspot.com",messagingSenderId:"668178102663",appId:"1:668178102663:web:bc247d167d2cab96adfb22",measurementId:"G-VCPEBG1XK7"}),u=(0,o.getAuth)(l),p=(0,i.getFirestore)(l);a()}catch(e){a(e)}})}};